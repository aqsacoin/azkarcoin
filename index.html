<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AzkarCoin</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-container">
            <h1>أذكارك اليومية مع أذكار كوين</h1>
            <p class="verse">بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ</p>
        </div>
    </header>

    <section class="mining-info">
        <h2>دورة التعدين الحالية</h2>
        <p>تم استخراج 3 عملات جديدة. استمر في ذكر الله للحصول على المزيد!</p>
    </section>

    <section class="features">
        <!-- زر عرض الآية أولاً -->
        <div class="feature-item">
            <h3>آية قرآنية</h3>
            <button class="verse-button" onclick="showVerse()">عرض الآية</button>
            <p class="daily-verse" id="verseText" style="display:none;">وَقُل رَّبِّ زِدْنِي عِلْمًا</p>
        </div>

        <!-- زر عرض الذكر بعد عرض الآية -->
        <div class="feature-item">
            <h3>ذكر اليوم</h3>
            <button class="dhikr-button" onclick="showDhikr()">عرض الذكر</button>
            <p class="daily-dhikr" id="dhikrText" style="display:none;">اللهم اجعلنا من أهل القرآن</p>
        </div>

        <!-- زر بدء التعدين بعد عرض الآية والذكر -->
        <div class="feature-item">
            <button class="mining-button" id="startMiningButton" onclick="startMining()" disabled>ابدأ التعدين</button>
        </div>

        <div id="countdown" style="display:none;">
            <p>دورة التعدين التالية ستبدأ بعد:</p>
            <p id="timer"></p>
        </div>
    </section>

    <footer>
        <p>&copy; 2024 AzkarCoin. جميع الحقوق محفوظة.</p>
    </footer>

    <script>
        let verseShown = false;
        let dhikrShown = false;
        let miningInProgress = false;
        let miningEndTime = 0;

        function showVerse() {
            document.getElementById("verseText").style.display = "block"; // إظهار الآية
            verseShown = true;
            checkMiningButtonState();
        }

        function showDhikr() {
            document.getElementById("dhikrText").style.display = "block"; // إظهار الذكر
            dhikrShown = true;
            checkMiningButtonState();
        }

        function checkMiningButtonState() {
            // تفعيل زر التعدين فقط إذا تم عرض الآية والذكر
            if (verseShown && dhikrShown && !miningInProgress) {
                document.getElementById("startMiningButton").disabled = false; // تفعيل زر التعدين
            }
        }

        function startMining() {
            if (verseShown && dhikrShown && !miningInProgress) {
                miningInProgress = true;
                document.getElementById("startMiningButton").disabled = true; // تعطيل الأزرار بعد بدء التعدين
                document.getElementById("verseText").style.display = "none"; // إخفاء الآية
                document.getElementById("dhikrText").style.display = "none"; // إخفاء الذكر
                document.getElementById("countdown").style.display = "block"; // إظهار العد التنازلي

                // حساب وقت الانتهاء بعد 8 ساعات (8 ساعات = 28800000 مللي ثانية)
                miningEndTime = new Date().getTime() + 8 * 60 * 60 * 1000;
                startCountdown(); // بدء العد التنازلي
            } else {
                alert("يرجى عرض الآية والذكر أولاً.");
            }
        }

        function startCountdown() {
            let countdownInterval = setInterval(function() {
                let now = new Date().getTime();
                let timeLeft = miningEndTime - now;

                if (timeLeft <= 0) {
                    clearInterval(countdownInterval); // إيقاف العد التنازلي
                    document.getElementById("timer").innerHTML = "تمت دورة التعدين! يمكنك بدء دورة جديدة الآن.";
                    setTimeout(function() {
                        resetMining(); // إعادة تفعيل الأزرار بعد انتهاء الدورة
                    }, 3000); // بعد 3 ثواني
                } else {
                    let hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    let minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                    let seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                    document.getElementById("timer").innerHTML = hours + "ساعة " + minutes + "دقيقة " + seconds + "ثانية ";
                }
            }, 1000); // تحديث كل ثانية
        }

        function resetMining() {
            miningInProgress = false;
            document.getElementById("countdown").style.display = "none"; // إخفاء العد التنازلي
            document.getElementById("startMiningButton").disabled = false; // إعادة تفعيل زر التعدين
            verseShown = false;
            dhikrShown = false;
        }
    </script>
</body>
</html>
